(()=>{"use strict";var e,t,n,i,r={},s={};function o(e){var t=s[e];if(void 0!==t)return t.exports;var n=s[e]={exports:{}};return r[e](n,n.exports,o),n.exports}function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}o.m=r,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"==typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"==typeof n.then)return n}var r=Object.create(null);o.r(r);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,o.d(r,s),r},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,n)=>(o.f[n](e,t),t)),[])),o.u=e=>"IntlTelInput.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},i="javascript-sdk:",o.l=(e,t,r,s)=>{if(n[e])n[e].push(t);else{var a,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==i+r){a=u;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",i+r),a.src=e),n[e]=[t];var h=(t,i)=>{a.onerror=a.onload=null,clearTimeout(p);var r=n[e];if(delete n[e],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(i))),t)return t(i)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!e||!/^http(s?):/.test(e));)e=n[i--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={792:0};o.f.j=(t,n)=>{var i=o.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise(((n,r)=>i=e[t]=[n,r]));n.push(i[2]=r);var s=o.p+o.u(t),a=new Error;o.l(s,(n=>{if(o.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",a.name="ChunkLoadError",a.type=r,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,r,[s,a,l]=n,c=0;if(s.some((t=>0!==e[t]))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(l)l(o)}for(t&&t(n);c<s.length;c++)r=s[c],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunkjavascript_sdk=self.webpackChunkjavascript_sdk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();class l{constructor(e){a(this,"changeMethod","increment"),a(this,"selectedInputEl",void 0),a(this,"inputEvents",["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop","paste"]),a(this,"cancelEvents",["mouseup","touchend","mouseleave","touchmove","touchcancel"]),a(this,"numberInputValues",[]),this.setupNumberInputs(e)}setupNumberInputs(e){for(let t=0;t<e.length;t++){let n,i,r=!1,s=!1;const o=e[t].getElementsByClassName("form-number-input-icons")[0];["mouseenter","mouseleave"].forEach((n=>{e[t].addEventListener(n,(()=>{r="mouseenter"===n,this.toggleIconsDisplay(r,s,o)}))}));const a=e[t].querySelector("a:first-child"),l=e[t].querySelector("a:last-child"),c=e[t].querySelector("input");c&&a&&l&&(this.inputEvents.forEach((e=>{c.addEventListener(e,(e=>{this.updateInputVal(e,t)}))})),["focusin","focusout"].forEach((e=>{c.addEventListener(e,(()=>{s="focusin"===e,this.toggleIconsDisplay(r,s,o),s&&c.addEventListener("wheel",(()=>!1),{passive:!1})}))})),[a,l].forEach((e=>{["mousedown","touchstart"].forEach((r=>{e.addEventListener(r,(r=>{r.preventDefault(),this.changeMethod=e===a?"increment":"decrement",this.selectedInputEl=c,this.changeVal(t),n=setTimeout((()=>{i=setInterval((()=>{this.changeVal(t)}),50)}),175)}))})),this.cancelEvents.forEach((t=>{e.addEventListener(t,(()=>{n&&clearTimeout(n),i&&clearInterval(i)}))}))}))),this.numberInputValues.push("")}}changeVal(e){this.selectedInputEl.focus();let t=this.numberInputValues[e]?Math.floor(parseFloat(this.numberInputValues[e])):0;"increment"===this.changeMethod?t++:t--,this.selectedInputEl.value=this.numberInputValues[e]=t.toString()}toggleIconsDisplay(e,t,n){e||t?n.style.display="block":e||t||(n.style.display="none")}updateInputVal(e,t){this.numberInputValues[t]=e.target.value}}const c=["ar","at","az","be","bg","bn","bs","cs","cy","da","de","eo","es","et","fa","fi","fo","fr","ga","gr","he","hi","hr","hu","id","is","it","ja","ka","km","ko","kz","lt","lv","mk","mn","ms","my","nl","no","pa","pl","pt","ro","ru","si","sk","sl","sq","sr","sv","th","tr","uk","uz","vn","zh"],d={AF:12,AX:24,AL:24,DZ:24,AS:24,AD:24,AO:24,AI:24,AQ:24,AG:24,AR:12,AM:24,AW:24,AU:12,AT:24,AZ:24,BS:24,BH:24,BD:12,BB:24,BY:24,BE:24,BZ:24,BJ:24,BM:24,BT:24,BO:12,BA:24,BW:24,BV:24,BR:24,IO:24,BN:24,BG:24,BF:24,BI:24,KH:24,CM:24,CA:24,CV:24,KY:24,CF:24,TD:24,CL:24,CN:24,CX:24,CC:24,CO:12,KM:24,CG:24,CD:24,CK:24,CR:24,CI:24,HR:24,CU:24,CY:24,CZ:24,DK:24,DJ:24,DM:24,DO:24,EC:24,EG:12,SV:24,GQ:24,ER:24,EE:24,ET:12,FK:24,FO:24,FJ:24,FI:24,FR:24,GF:24,PF:24,TF:24,GA:24,GM:24,GE:24,DE:24,GH:24,GI:24,GR:12,GL:24,GD:24,GP:24,GU:24,GT:24,GG:24,GN:24,GW:24,GY:24,HT:24,HM:24,VA:24,HN:24,HK:24,HU:24,IS:24,IN:24,ID:24,IR:12,IQ:12,IE:24,IM:24,IL:12,IT:24,JM:24,JP:24,JE:24,JO:12,KZ:24,KE:12,KI:24,KP:12,KR:12,KW:12,KG:24,LA:24,LV:24,LB:24,LS:24,LR:24,LY:12,LI:24,LT:24,LU:24,MO:24,MK:24,MG:24,MW:24,MY:24,MV:24,ML:24,MT:24,MH:24,MQ:24,MR:24,MU:24,YT:24,MX:12,FM:24,MD:24,MC:24,MN:24,MS:24,MA:24,MZ:24,MM:24,NA:24,NR:24,NP:12,NL:24,AN:24,NC:24,NZ:12,NI:24,NE:24,NG:12,NU:24,NF:24,MP:24,NO:24,OM:12,PK:12,PW:24,PS:24,PA:24,PG:24,PY:12,PE:12,PH:12,PN:24,PL:24,PT:24,PR:24,QA:12,RE:24,RO:24,RU:24,RW:12,SH:24,KN:24,LC:24,PM:24,VC:24,WS:24,SM:24,ST:24,SA:12,SN:24,CS:24,SC:24,SL:24,SG:24,SK:24,SI:24,SB:24,SO:24,ZA:12,GS:24,ES:24,LK:12,SD:24,SR:24,SJ:24,SZ:24,SE:24,CH:24,SY:12,TW:12,TJ:24,TZ:24,TH:24,TL:24,TG:24,TK:24,TO:24,TT:24,TN:24,TR:24,TM:24,TC:24,TV:24,UG:24,UA:24,AE:12,GB:24,US:12,UM:24,UY:12,UZ:24,VU:24,VE:12,VN:12,VG:24,VI:24,WF:24,EH:24,YE:12,ZM:24,ZW:12},u="https://stats.sender.net",h="6Lf_JEgaAAAAAO_blQh_do9SoSt2syEArU8xG6Ev",p=e=>{if(e&&"object"==typeof e)for(const t in e)if(void 0!==t)return!0;return!1},m=()=>{let e;if("maxTouchPoints"in navigator)e=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)e=navigator.msMaxTouchPoints>0;else{const t=window.matchMedia&&matchMedia("(pointer:coarse)");if(t&&"(pointer:coarse)"===t.media)e=!!t.matches;else if("orientation"in window)e=!0;else{const t=navigator.userAgent;e=/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(t)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(t)}}return e},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=document.cookie,n={};return t=t.split(";"),t.forEach((function(e){" "===(e=e.split("="))[0].substr(0,1)&&(e[0]=e[0].substr(1)),n[e[0]]=e[1]})),""!==e?n[e]:n},g=(e,t,n)=>f(e+t)||f(e+n),v=e=>{const{id:t,hash_id:n,schedule_type:i,schedule_start:r,schedule_end:s,hide_on_tablet:o,hide_on_mobile:a,hide_on_desktop:l,visibility_pages:c,exact_visibility_pages:d,visibility_type:u,popup_frequency_minutes:h,popup_frequency_amount:p,always_show_popup:m}=e,f=new URL(window.location.href);if("stats.sender.net"===f.hostname&&!y(f,n))return!1;if(!b(i,r,s)||!w(o,a,l)||!E(c,d,u))return!1;if(!g("sender_subscribed_",n,t)){if(m)return!0;const e=parseInt(g("sender_popup_shown_",n,t));if(!e)return!0;const i=Math.floor(Date.now()/1e3);if(0===parseInt(h))return!0;const r=e+60*h;if(parseInt(p)&&i>r)return!0}return!1},y=(e,t)=>!!t&&-1!==e.pathname.indexOf(t),b=(e,t,n)=>{if("specific"===e){const e=Date.now();return e>t&&n>e}return!0},w=(e,t,n)=>{const i=m();return/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(navigator.userAgent.toLowerCase())&&i?!e:i?!t:!n},E=(e,t,n)=>{const i=e?.trim(),r=t?.trim();if("always"===n||!i&&!r)return!0;let s;if(i){const e=i.replace(/\s/g,"").split(",");for(let t=0;t<e.length;t++)if(window.location.href.includes(e[t])){s=!0;break}}if(!s&&r){const e=r.replace(/\s/g,"").split(",");for(let t=0;t<e.length;t++)if(window.location.href===e[t]){s=!0;break}}return s?"show-specific"===n:"hide-specific"===n},x={sender_customer:"subscriber_id",sender_campaign:"campaign_id",sender_ctype:"campaign_type"};function S(e){const t=e?.replace("id-","");return t?`https://www.sender.net/?utm_source=sender_form&utm_campaign=${t}`:"https://www.sender.net/"}function _(e){const{fields:t,...n}=e||{};if(!t||!Object.keys(t).length)return n;const i=new Set(Object.keys(t).map((e=>Object.keys(t[e]||{}))).flat()),r=(e,t,n,i)=>{const r=e.getAttribute("name");return r&&i?.[r]?.[t]||n},s=e=>{n[e]||(n[e]={})},o=(e,n)=>{const i={};return Object.keys(e||{}).forEach((s=>{i[s]=i=>r(i,n,e[s],t)})),i},a=(e,n)=>i=>r(i,e,n,t);return i.forEach((e=>{switch(e){case"missing":n.missingValue=o(n.missingValue,"missing");break;case"mismatch":n.patternMismatch=o(n.patternMismatch,"mismatch");break;case"range_over":s("outOfRange"),n.outOfRange.over=a("range_over",n.outOfRange.over);break;case"range_under":s("outOfRange"),n.outOfRange.under=a("range_under",n.outOfRange.under);break;case"length_over":s("wrongLength"),n.wrongLength.over=a("length_over",n.wrongLength.over);break;case"length_under":s("wrongLength"),n.wrongLength.under=a("length_under",n.wrongLength.under)}})),n}function C(e){document.cookie="sender_subscriber_id="+e+"; path=/; max-age=2592000"}function k(e,t){const n=t.querySelector("#sender-form-content"),i=n.querySelector(".form-container"),r=n.querySelector(".form-display"),s=t.querySelector(".wheel-base"),o=s.querySelector(".wheel-base-modifier"),a=s.querySelector(".wheel-container-holder"),l=a.querySelector(".wheel-container");e.addEventListener("resize",p),t.addEventListener("scroll",p,!0);const c={x:n.querySelector(".intersection-pointer-x"),y:n.querySelector(".intersection-pointer-y")};for(const e in c){let t=c[e];t||(t=document.createElement("div"),t.classList.add("intersection-pointer-"+e),t.style.cssText="position: absolute; width: 2px; height: 2px;",c[e]=t,i.appendChild(t))}const d={root:t,rootMargin:"0px",threshold:[0,1],idleTimeout:0},u=new IntersectionObserver(p,{...d});u.observe(c.x);const h=new IntersectionObserver(p,{...d});function p(){!function(e,t,n,i){const{width:r}=e.getBoundingClientRect(),s=parseFloat(getComputedStyle(i)["margin-left"].replace(/-|px/g,"")),o=parseInt(getComputedStyle(n).width.replace("px","")),a=s/o*100,l=100-Math.round(100*a)/100,c=Math.round(100*r/l),d=c<o?c/o:1;n.style.transform=`scale(${d})`,t.style.height=n.getBoundingClientRect().height+"px"}(s,o,a,l),function(e,t,n,i,r,s,o){if(e<=525)return void("top"in o.style&&o.style.removeProperty("top"));const a=n.getBoundingClientRect().height,l=i.getBoundingClientRect().height,{height:c,top:d}=r.getBoundingClientRect(),u=s.getBoundingClientRect().height,h=o.getBoundingClientRect().height,p=n.scrollTop,m=d-(t-a),f=p-(m+p),g=c-a+m,v=f<=0?0:f,y=c-v-(g<=0?0:g),b=s.offsetTop,w=l-u-b,E=w/2;let x=(y-h)/2;y-b-E<h-x&&(x=y-h-E),x+=v;const S=h+x;l-S<w&&(x-=w-(l-S)),o.style.top=x+"px"}(e.innerWidth,e.innerHeight,t,n,s,r,a),function(e,t,n,i,r){let{x:s,y:o}=r;const{width:a,height:l}=t.getBoundingClientRect();if(0===a||0===l)return;const{width:c,top:d,left:u}=i.getBoundingClientRect(),{width:h,top:p,left:m}=n.getBoundingClientRect(),f=c-(m-u)-h||1;s.style.right=-f+"px";const g=p-d;s.style.top=-g+"px",o.style.top=-g-1+"px"}(e.innerHeight,n,i,t,c)}return h.observe(c.y),{updateWheelEls:p,removeListeners:function(){e.removeEventListener("resize",p),t.removeEventListener("scroll",p,!0),u.disconnect(),h.disconnect(),c.x?.remove(),c.y?.remove()}}}function I(e,t){const n=e.querySelector(".sender-form-modal.is-active"),i=n?.querySelector("#sender-form-content"),r=i?.querySelector(".wheel-container-holder");if(!r)return;const s=i.querySelector(".sender-form");return s?.classList.add("area-disabled"),r.style.top||n.scrollTo({top:i.getBoundingClientRect().y,behavior:"smooth"}),function(e,t){function n(e){const[t,n]=getComputedStyle(e).transform.match(/matrix.*\((.+)\)/)[1].split(", "),i=Math.atan2(Number(n),Number(t))/(Math.PI/180);return i<0?i+360:i}return new Promise((function(i){const r=e.querySelector(".wheel-content"),s=e.querySelector(".wheel-pin"),o=e.querySelector(".wheel-pin-shadow");if(!r||!s||!o)return;s.style.transformOrigin="31px 31px",o.style.transformOrigin="31px 31px",s.style.transition="transform 10ms",o.style.transition="transform 10ms";const a=360/e.querySelectorAll(".wheel-handle").length,l=1800-a*t,c=n(r),d=135-a/2-c;function u(e){s.style.transform=`rotateZ(${e}deg)`,o.style.transform=`rotateZ(${e}deg)`}r.style.transition="transform 8s cubic-bezier(0,0,.7,.99)",r.style.transform=`rotateZ(${l+c+d}deg)`;let h=0;const p=[10,20,28,35,40,44,46,48,49,50,50,50,50],m=131.5%a,f=m+13,g=setInterval((function(){if(h>8e3)return u(0),clearInterval(g),void i();h+=10;let e=n(r)%a;if(f>a&&e<=18-(a-m)&&(e+=a),e>=m&&e<=f){const t=Math.round(e-m);p[t]&&u(-p[t])}else u(e>f&&e<f+5?45*-Math.round(5-(e-f))/5:0)}),10)}))}(r,t).then((()=>{s?.classList.remove("area-disabled")}))}function L(e,t){const n=e.querySelector(".coupon-box");if(!n)return;const i=n.querySelector(".sender-form-coupon-box-title");if(i){!function(e,t){function n(e){for(const n in t)if(n.substring(0,e.length)===e)return!0;return!1}function i(e){if(e.nodeType===Node.ELEMENT_NODE)for(let t=0;t<e.childNodes.length;t++)i(e.childNodes[t]);else e.nodeType===Node.TEXT_NODE&&o(e,0)}const r=new Map;let s="";function o(e,i){let a=e.textContent;a=a.slice(i);for(let l=0;l<a.length;l++){const c=a[l],d=e.parentElement;if(n(s+c)){if(r.has(d)){const e=r.get(d);if(l){e[e.length-1].endIndex++}else e.push({startIndex:l+i,endIndex:l+i});r.set(d,e)}else r.set(d,[{startIndex:l+i,endIndex:l+i}]);s+=c}else r.clear(),s="";if(t[s]){const n=t[s],i=r.get(d),a=i[i.length-1];e.nodeValue=e.nodeValue.substr(0,a.startIndex)+n+e.nodeValue.substr(a.endIndex+1),i.pop(),T(r),r.clear(),s="";const l=a.startIndex+n.length+1;if(a.endIndex+1<e.nodeValue.length){o(e,l);break}}}}i(e)}(i,{"[PRIZE]":e.querySelector(".wheel-content")?.getElementsByClassName("slice-text")[t.slice_index]?.innerText||"","[COUPON]":t.coupon_code})}const r=n.querySelector(".coupon-code-input-wrap");if(!r)return;const s=r.querySelector(".coupon-value");if(!s)return;s.innerText=t.coupon_code;const o=r.querySelector(".copy-code-btn");o&&o.addEventListener("click",(()=>{navigator.clipboard?.writeText(s.innerText).then((()=>{r.classList.add("text-copied");const e=o.querySelector(".copy-coupon-icon");e&&(e.style.display="none"),o.querySelector(".after-copy-coupon-icon")?.removeAttribute("style")})).catch((e=>{}))}))}function T(e){e.forEach(((e,t)=>{if(!e.length)return;let n=0;for(let i=0;i<t.childNodes.length;i++){const r=t.childNodes[i];if(r.nodeType!==Node.TEXT_NODE)continue;const s=e[n];if(r.nodeValue=r.nodeValue.substr(0,s.startIndex)+""+r.nodeValue.substr(s.endIndex+1),n++,n===e.length)break}}))}function P(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const A="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.9/flatpickr.min.js",O="https://cdnjs.cloudflare.com/ajax/libs/flatpickr/4.6.9/flatpickr.min.css",M="https://cdn.jsdelivr.net/npm/intl-tel-input@17.0.13/build/css/intlTelInput.min.css",R="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.13/js/utils.min.js";class q extends HTMLElement{constructor(){super();const e=this.attachShadow({mode:"open"}),t=document.createElement("div");this.wrapper=t;const n=document.createElement("link");n.rel="stylesheet",n.href=O,e.appendChild(n),e.appendChild(t)}appendElement(e){this.wrapper.appendChild(e)}}customElements.get("sender-calendar-container")||customElements.define("sender-calendar-container",q);const D=class{constructor(e){P(this,"iframeElement",void 0),P(this,"formRendered",!1),P(this,"requestSent",!1),P(this,"sendingRequest",!1),P(this,"el",void 0),P(this,"settings",void 0),P(this,"recaptchaWrap",void 0),P(this,"recaptchaEl",void 0),P(this,"recaptchaElInner",void 0),P(this,"recaptchaMutationObserver",void 0),P(this,"formType",void 0),P(this,"bouncer",void 0),P(this,"formInstancesPointer",null),P(this,"formStatusOnRender","enabled"),P(this,"formStatus","initialized"),P(this,"formRenderCallback",null),P(this,"datetimeInputs",[]),P(this,"touchScreenCalendar",void 0),P(this,"dateTimeInputValidationMsgs",void 0),P(this,"dateTimeRegex",/^([1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01])[\ ]([01]?[0-9]|2[0-3]):[0-5][0-9])$/),P(this,"dateRegex",/^([1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))$/),P(this,"hasAdBlocker",!1),P(this,"phoneInputEl",void 0),P(this,"guidingDiv",void 0),P(this,"countryDropdown",void 0),P(this,"intPhoneInput",void 0),P(this,"queryTimeout",void 0),P(this,"phoneNumberErrorMsgs",{brokenPhoneFormat:e=>{if(this.intPhoneInput.telInput===e&&""!==this.intPhoneInput.telInput.value)return-99===this.intPhoneInput.getValidationError()},invalidCountryCode:e=>{if(this.intPhoneInput.telInput===e)return this.intPhoneInput.getValidationError()===intlTelInputUtils.validationError.INVALID_COUNTRY_CODE},phoneTooShort:e=>{if(this.intPhoneInput.telInput===e)return this.intPhoneInput.getValidationError()===intlTelInputUtils.validationError.TOO_SHORT},phoneTooLong:e=>{if(this.intPhoneInput.telInput===e)return this.intPhoneInput.getValidationError()===intlTelInputUtils.validationError.TOO_LONG}}),P(this,"reachableMethods",{lookupIp:e=>{this.lookupVisitorCountry().then((t=>{const n=t?this.handleUnsupportedCountryCodes(t)||t:"us";return e(n)})).catch((()=>{e("us")}))}}),P(this,"serialize",(e=>{let t={};return e.querySelectorAll("[name]").forEach((e=>{t[e.name]="phone"===e.name&&this.intPhoneInput?.getNumber()||e.value,"checkbox"===e.type&&(t[e.name]=e.checked),e.classList.contains("sender-datetime-input")&&t[e.name]&&(t[e.name]=t[e.name]+(e.classList.contains("show-time")?":00":" 00:00:00"))})),t})),P(this,"addReCaptcha",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=document.createElement("script");t.async=1,t.id="form-recaptcha",t.src=`https://www.google.com/recaptcha/api.js?render=${h}`,e.head.appendChild(t)})),P(this,"checkResponsive",(()=>{const e=this.iframeElement.contentWindow.document.body.querySelector("#responsive-media");window.innerWidth<525?e?.removeAttribute("media"):e?.setAttribute("media","not all")})),P(this,"sendRequest",(e=>{if(this.sendingRequest||this.requestSent)return;e.site_visit=!0,e.url=window.location.href,this.sendingRequest=!0,this.clearServerErrorMessage();const t=this.el.querySelector(".sender-form .sender-form-button"),n=Boolean(void 0!==this.settings.buttonTextDuringSubmit&&t);let i;n&&(t.classList.add("sending-request"),i=t.innerText,t.innerText=t.getAttribute("text_during_submit")||this.settings.buttonTextDuringSubmit||""),fetch(`${this.apiBase}/forms/${this.settings.hash_id}/subscribe`,{headers:new Headers({"content-type":"application/json"}),method:"POST",body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{if(!e.success)throw new Error(e.message||"Something went wrong.");this.requestSent=!0,this.isPopup&&this.setCookie("sender_subscribed_"+this.hashId,1),this.formAvailable&&this.showPostSubmissionScreen(e)})).catch((e=>{let t;if(e&&"object"==typeof e&&"TypeError"===e.name){if(this.hasAdBlocker)return void this.showErrorMessage("It looks like the form couldn’t be submitted—this may be due to an AdBlocker. Please try disabling it or whitelisting this site to continue.");t="Something went wrong!"}else t=e;const n=t+" Please try again later.";this.showErrorMessage(n)})).finally((()=>{this.formAvailable&&(this.sendingRequest=!1,n&&(t.classList.remove("sending-request"),t.innerText=i))}))})),P(this,"callFn",((e,t)=>{"function"==typeof this[e]&&this[e](t)})),P(this,"redirect",(e=>{window.location.href=/^http.*/i.test(e.redirect_url?.trim())?e.redirect_url:"http://"+e.redirect_url})),P(this,"setupCustomInputs",(()=>{const e=this.iframeElement.contentWindow.document,t=e.querySelectorAll(".number-input-wrap");t.length&&new l(t),this.phoneInputEl=e.querySelector(".sender-default-phone-input"),this.phoneInputEl&&this.setupPhoneInput(),this.datetimeInputs=e.querySelectorAll(".sender-datetime-input"),this.datetimeInputs.length&&(this.dateTimeInputValidationMsgs={missingValue:this.settings?.validation_messages?.missingValue?.default||"Please fill out this field.",patternMismatch:this.settings?.validation_messages?.patternMismatch?.dateTime||"Please use the YYYY-MM-DD HH:MM format."},this.setupDatetimeInputs())})),P(this,"setupPhoneInput",(async()=>{const{default:e}=await o.e(303).then(o.t.bind(o,603,23)),t='.iti__flag{background-image: url("https://cdn.sender.net/system_images/flags.png");}@media(-webkit-min-device-pixel-ratio: 2),(min-resolution:192dpi){.iti__flag{background-image:url("https://cdn.sender.net/system_images/flags2x.png");}}ul.iti__country-list{white-space:normal;}.iti .iti__country-list{width: 100%;}.iti .iti__country-list li:not(.iti__divider){margin: 0}.iti .iti__country-list li.iti__divider{margin: 0 0 5px}.iti .iti__country-list li{font-size: 13px; color: #000; line-height: 20px;font-family: Arial, Helvetica, \'Times New Roman\', sans-serif; cursor:pointer;} .iti .iti__dial-code{color: #555}.iti__flag-container{width:100%} .iti .iti__selected-flag{width: 48px; padding: 0 6px 0 10px;} .iti .iti__flag-box{margin-right: 10px;}.iti-mobile .iti--container{z-index:10999;}',n=document.createElement("link");n.rel="stylesheet",n.href=M,this.iframeElement.contentWindow.document.head.appendChild(n),this.createStyleSheet(this.iframeElement.contentWindow.document.head,t,"iti-stylesheet-sender");const i=document.head;if(("embed"===this.formType||m())&&!i.querySelector("style.iti-stylesheet-sender")){const e=document.createElement("link");e.rel="stylesheet",e.href=M,i.appendChild(e),this.createStyleSheet(i,t,"iti-stylesheet-sender")}const r=f("sender_country");this.intPhoneInput=e(this.phoneInputEl,{initialCountry:this.handleUnsupportedCountryCodes(r)||r||"auto",geoIpLookup:e=>this.reachableMethods.lookupIp(e),utilsScript:R});const s=this.phoneInputEl.parentElement,a=s.querySelector(".iti__selected-flag");this.countryDropdown=s.querySelector("ul.iti__country-list"),this.phoneInputEl.setAttribute("data-bouncer-target","#sender-form-phone-error");const l=document.createElement("div");l.setAttribute("id","sender-form-phone-error"),s.parentNode.insertBefore(l,s.nextSibling),m()||this.isPopup?(this.phoneInputEl.addEventListener("open:countrydropdown",(()=>{this.bindDropdownEventListeners()})),this.phoneInputEl.addEventListener("close:countrydropdown",(()=>{this.unbindDropdownEventListeners()}))):(this.phoneInputEl.addEventListener("open:countrydropdown",(()=>{this.repositionDropdown(),this.bindDropdownEventListeners()})),this.phoneInputEl.addEventListener("close:countrydropdown",(()=>{this.restoreDropdownPosition(),this.unbindDropdownEventListeners()}))),this.countryDropdown&&(this.countryDropdown.addEventListener("mouseenter",(()=>{a.style.cssText="background-color: rgba(0,0,0,0.05);"})),this.countryDropdown.addEventListener("mouseleave",(()=>{a.hasAttribute("style")&&a.removeAttribute("style")})))})),P(this,"repositionDropdown",(()=>{const e=this.iframeElement.parentElement;if(e&&this.countryDropdown){const t=document.createElement("div");t.classList.add("sender-iti-guiding-div","iti"),t.style.position="absolute",t.appendChild(this.countryDropdown),this.guidingDiv=t,e.appendChild(t),this.positionGuidingDiv(),this.iframeElement.contentWindow.window.addEventListener("resize",this.positionGuidingDiv)}})),P(this,"restoreDropdownPosition",(()=>{if(this.guidingDiv){const e=this.guidingDiv.querySelector("ul.iti__country-list");e&&this.phoneInputEl.parentElement.appendChild(e),this.guidingDiv.remove(),this.guidingDiv=null}this.iframeElement.contentWindow.window.removeEventListener("resize",this.positionGuidingDiv)})),P(this,"positionGuidingDiv",(()=>{const e=this.phoneInputEl.getBoundingClientRect(),t=window.pageYOffset||document.documentElement.scrollTop,n=e.top+t,i=n+this.phoneInputEl.offsetHeight+200<t+window.innerHeight,r=n-200>t,s=!i&&r?0:this.phoneInputEl.offsetHeight;!i&&r?this.countryDropdown.classList.add("iti__country-list--dropup"):this.countryDropdown.classList.remove("iti__country-list--dropup"),this.guidingDiv.style.width=e.width+"px",this.guidingDiv.style.top=e.top+s+"px",this.guidingDiv.style.left=e.left+1+"px"})),P(this,"bindDropdownEventListeners",(()=>{["click","keydown"].forEach((e=>{this.iframeElement.contentWindow.document.documentElement.addEventListener(e,"click"===e?this.dispatchClickEv:this.dispatchKeydownEv)}))})),P(this,"unbindDropdownEventListeners",(()=>{["click","keydown"].forEach((e=>{this.iframeElement?.contentWindow?.document?.documentElement.removeEventListener(e,"click"===e?this.dispatchClickEv:this.dispatchKeydownEv)}))})),P(this,"setupDatetimeInputs",(()=>{const e=document.head;if("embed"===this.formType&&!e.querySelector(".sender-flatpickr-calendar-styles")){const t=this.iframeElement.contentWindow.document.querySelector("style.sender-form-calendar-overrides"),n=document.createElement("link");n.rel="stylesheet",n.href=O,e.appendChild(n),t?.innerText&&this.createStyleSheet(e,t.innerText,"sender-flatpickr-calendar-styles")}if(this.isPopup){const e=document.createElement("link");e.rel="stylesheet",e.href=O,this.iframeElement.contentWindow.document.head.appendChild(e)}const t=document.createElement("script");t.type="text/javascript",t.src=A,t.onload=()=>{this.lookupVisitorCountry().then((e=>{if(!this.formAvailable)return;let t=e.toLowerCase();if(c.includes(t)){const n=document.createElement("script");n.type="text/javascript",n.src=`https://npmcdn.com/flatpickr@4.6.9/dist/l10n/${t}.js`,this.iframeElement.contentWindow.document.head.appendChild(n),n.onload=()=>{this.createFlatpickrInstances(t,e)}}else this.createFlatpickrInstances("default",e)})).catch((()=>{this.formAvailable&&this.createFlatpickrInstances("default",null)}))},this.iframeElement.contentWindow.document.head.appendChild(t)})),P(this,"wrapSenderCalenderContainer",(e=>{const t=document.createElement("sender-calendar-container");this.iframeElement.parentElement.appendChild(t);const n=this.iframeElement.contentWindow.document.querySelector("style.sender-form-calendar-overrides");if(n?.innerText){const e=document.createElement("style");e.innerText=n.innerText,t.appendElement(e)}t.appendElement(e)})),P(this,"createFlatpickrInstances",((e,t)=>{const n='<svg width="12" height="11" viewBox="0 0 12 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.97305 0L5.92305 1.05L9.14805 4.275H-0.00195312V5.775H9.14805L5.92305 9L6.97305 10.05L11.998 5.025L6.97305 0Z" fill="black" style="fill: black"/> </svg>';this.touchScreenCalendar=m();const i=!this.touchScreenCalendar&&this.isPopup;this.datetimeInputs.forEach((r=>{let s,o=!1;const a=r.parentElement.querySelector(".error-message.message-slot"),l=r.classList.contains("show-time"),c=()=>{o&&this.iframeElement.contentWindow.document.dispatchEvent(new MouseEvent("mousedown"))};this.iframeElement.contentWindow.window.flatpickr(r,{enableTime:l,locale:e,time_24hr:24===d[t],minuteIncrement:1,disableMobile:!0,shorthandCurrentMonth:!0,nextArrow:n,prevArrow:n,static:i,onReady:(e,t,n)=>{s=n.calendarContainer,this.touchScreenCalendar?(this.createCalendarModal(r,s),r.addEventListener("focus",(()=>{s.closest(".sender-form-calendar-modal").classList.add("open"),s.classList.contains("open")||s.classList.add("open")}))):"embed"===this.formType&&(this.wrapSenderCalenderContainer(s),s.addEventListener("mousedown",(e=>{e.stopImmediatePropagation()})),document.addEventListener("mousedown",c))},onChange:()=>{a.style.display="none"},onOpen:()=>{this.touchScreenCalendar?s.closest(".sender-form-calendar-modal").classList.add("open"):(o=!0,this.positionCalendar(s,r,i))},onClose:()=>{if(this.touchScreenCalendar){const e=s.closest(".sender-form-calendar-modal");this.closeModal(e,s)}else o=!1;this.validateInput(r,a)},onDestroy:()=>{"embed"===this.formType&&document.removeEventListener("mousedown",c)}})}))})),P(this,"positionCalendar",((e,t,n)=>{const i=this.iframeElement,r=i.getBoundingClientRect(),s=t.getBoundingClientRect();let o,a,l,c,d,u,h;n?(o=i.contentWindow.window.innerHeight-s.bottom,l=o<e.offsetHeight&&s.top>e.offsetHeight,a=i.contentWindow.window.pageXOffset+s.left,d=!this.settings.rtl&&a+e.offsetWidth<i.contentWindow.document.body.offsetWidth,c=!d&&a>e.offsetWidth-t.offsetWidth,u=l?-e.offsetHeight-2:t.offsetHeight+2,h=d?0:c?-(e.offsetWidth-t.offsetWidth):-(e.offsetWidth-t.offsetWidth)/2):(o=window.innerHeight-r.bottom-s.bottom,l=o<e.offsetHeight&&r.top+s.top>e.offsetHeight,a=window.pageXOffset+r.left+s.left,d=a+e.offsetWidth<document.body.offsetWidth,c=!d&&a>e.offsetWidth-t.offsetWidth,u=l?s.top-e.offsetHeight-2:s.top+t.offsetHeight+2,h=d?s.left:c?-(e.offsetWidth-t.offsetWidth)+s.left:-(e.offsetWidth-t.offsetWidth)/2+s.left),setTimeout((()=>{e&&(e.style.top=u+"px",e.style.left=h+"px")}))})),P(this,"createCalendarModal",((e,t)=>{const n=e.parentElement.querySelector(".error-message.message-slot"),i=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),o=document.createElement("div"),a=document.createElement("div");i.classList.add("sender-form-calendar-modal"),r.classList.add("sender-calendar-modal-inner"),s.classList.add("sender-modal-background"),i.appendChild(r),i.appendChild(s),r.appendChild(o),o.appendChild(a),a.appendChild(t),r.addEventListener("click",(()=>{this.closeModal(i,t),this.validateInput(e,n)})),t.addEventListener("click",(e=>{e.stopPropagation()})),"embed"===this.formType?(this.iframeElement.parentElement.appendChild(i),this.wrapSenderCalenderContainer(i)):this.iframeElement.contentWindow.document.body.appendChild(i)})),P(this,"lookupVisitorCountry",(()=>{const e=f("sender_country");if(e)return Promise.resolve(e);if(window.countryLookupPromise)return window.countryLookupPromise;const t=fetch("https://www.cloudflare.com/cdn-cgi/trace").then((e=>new Promise((t=>{e.text().then((e=>{let n="";const i=/^loc=(.*)$/gm;let r=i.exec(e);for(;null!==r;)n=n.concat(r[1]+"\n"),r=i.exec(e);const s=n.trim();this.setCookie("sender_country",s),t(s)}))})))).catch((e=>Promise.reject(e)));return window.countryLookupPromise=t})),P(this,"responsiveCallback",(()=>{window.innerWidth<525?this.el.querySelector("#responsive-media")?.removeAttribute("media"):this.el.querySelector("#responsive-media")?.setAttribute("media","not all")})),P(this,"addResponsiveListener",(()=>{this.responsiveCallback(),window.addEventListener("resize",this.responsiveCallback)})),P(this,"removeResponsiveListener",(()=>{window.removeEventListener("resize",this.responsiveCallback)})),e&&(this.settings=e,this.formType=e.resource_type)}async detectAdBlocker(){await fetch(u+"/ping").catch((()=>{this.hasAdBlocker=!0}))}get formAvailable(){return"unavailable"!==this.formStatus}get isPopup(){return"popup"===this.formType||"spinToWin"===this.formType}sendApiRequest(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(e,{headers:new Headers({"content-type":"application/json"}),method:n,body:JSON.stringify(t)})}setForm(e){this.el=e,this.clearOldCatchaElement()}autoCompleteOff(){this.el.querySelectorAll(".sender-form-input")?.forEach((e=>e.autocomplete="off"))}clearOldCatchaElement(){const e=this.el.querySelector(".recaptcha-preview-wrap");e&&e.parentNode.removeChild(e)}addBranding(){if(!this.settings.is_free_plan)return;const e="inner"===this.settings.branding_type||"embed"===this.formType,t=e?".sender-form":".sender-form-modal-content",n=this.iframeElement.contentWindow.document.querySelector(t),i={referrerId:this.settings.referrer_id};let r;r=e?function(e){const t="fullWhite"===e.brandingDesign,n="whiteText"===e.brandingDesign;return`\n  <div\n    style="margin-top: 20px; line-height: 1; text-align: ${e.rtlEnabled?"right":"left"}"\n  >\n    <a\n      style="cursor: pointer;"\n      target="_blank"\n      href=${S(e.referrerId)}\n    >\n      <img\n        alt="Sender.net"\n        src="https://cdn.sender.net/accounts_resources/logo-no-text.svg"\n        style="height: 13px; margin-right: 5px; position: relative; top: 2px;${t?" filter: invert(1) brightness(100);":""}"\n      /><span\n        style="text-decoration: unset; font-family: Arial, sans-serif; color: ${n||t?"#fff":"#555"}; font-size: 12px; line-height: 16px;"\n        >Sender.net email marketing\n      </span>\n    </a>\n  </div>\n`}(Object.assign(i,{rtlEnabled:this.settings.rtl,brandingDesign:this.settings.branding_design})):`\n  <div\n    style="display: flex; justify-content: center; margin-top: 30px;"\n  >\n    <a\n      target="_blank"\n      href=${S(i.referrerId)}\n      style="cursor: pointer;"\n    >\n      <img\n        src="https://cdn.sender.net/accounts_resources/popups/sender-brand.png"\n        alt="Sender.net"\n        style="height: 40px; display: block;"\n      />\n    </a>\n  </div>\n  `,e?n.parentElement.insertAdjacentHTML("beforeend",r):n.insertAdjacentHTML("beforeend",r)}validateRecaptcha(e,t,n){const i=e=>{e&&this.sendRequest({...n,recaptchaResponse:e})};e.ready((function(){e.execute(t,{action:"submit"}).then(i).catch((e=>{}))}))}appendCaptcha(e,t){this.recaptchaWrap?(this.listenForRecaptchaAppend(),this.recaptchaWrap.append(t)):e.append(t)}listenForRecaptchaAppend(){this.recaptchaMutationObserver=new MutationObserver((e=>{e.forEach((e=>{if(e.addedNodes)for(let t=0;t<e.addedNodes.length;t++){"IFRAME"===e.addedNodes[t].nodeName&&(this.recaptchaEl=this.recaptchaWrap.querySelector(".recaptcha-preview"),this.recaptchaElInner=this.recaptchaWrap.querySelector(".recaptcha-preview > div:first-of-type"),this.recaptchaElInner.style.width="0px",this.resizeCaptcha(),this.recaptchaMutationObserver.disconnect())}}))})),this.recaptchaMutationObserver.observe(this.recaptchaWrap,{childList:!0,subtree:!0})}shouldResizeCaptcha(){this.settings?.use_recaptcha&&this.recaptchaEl&&this.resizeCaptcha()}resizeCaptcha(e){e&&(this.recaptchaElInner=this.recaptchaWrap.querySelector(".recaptcha-preview > div:first-of-type")),this.recaptchaWrap.offsetWidth<304?(this.recaptchaEl.style.height=this.recaptchaWrap.offsetWidth/304*78+"px",this.recaptchaElInner.style.transform=`scale(${this.recaptchaWrap.offsetWidth/304})`,this.recaptchaElInner.style.transformOrigin="0 0"):(this.recaptchaEl.style.height="78px",this.recaptchaElInner.style.transform="unset",this.recaptchaElInner.style.transformOrigin="unset")}addValidatorScript(e){return e||(e=document),new Promise((t=>{const n=e.createElement("script");n.type="text/javascript",n.async=!0,n.text='/*!\n * formbouncerjs v1.4.6\n * A lightweight form validation script that augments native HTML5 form validation elements and attributes.\n * (c) 2019 Chris Ferdinandi\n * MIT License\n * http://github.com/cferdinandi/bouncer\n */\n/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */\n"document"in self&&((!("classList"in document.createElement("_"))||document.createElementNS&&!("classList"in document.createElementNS("http://www.w3.org/2000/svg","g")))&&function(e){"use strict";if("Element"in e){var t="classList",r="prototype",n=e.Element[r],a=Object,i=String[r].trim||function(){return this.replace(/^\\s+|\\s+$/g,"")},o=Array[r].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1},u=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new u("SYNTAX_ERR","An invalid or illegal string was specified");if(/\\s/.test(t))throw new u("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},s=function(e){for(var t=i.call(e.getAttribute("class")||""),r=t?t.split(/\\s+/):[],n=0,a=r.length;n<a;n++)this.push(r[n]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},c=s[r]=[],f=function(){return new s(this)};if(u[r]=Error[r],c.item=function(e){return this[e]||null},c.contains=function(e){return-1!==l(this,e+="")},c.add=function(){var e,t=arguments,r=0,n=t.length,a=!1;do{-1===l(this,e=t[r]+"")&&(this.push(e),a=!0)}while(++r<n);a&&this._updateClassName()},c.remove=function(){var e,t,r=arguments,n=0,a=r.length,i=!1;do{for(t=l(this,e=r[n]+"");-1!==t;)this.splice(t,1),i=!0,t=l(this,e)}while(++n<a);i&&this._updateClassName()},c.toggle=function(e,t){e+="";var r=this.contains(e),n=r?!0!==t&&"remove":!1!==t&&"add";return n&&this[n](e),!0===t||!1===t?t:!r},c.toString=function(){return this.join(" ")},a.defineProperty){var d={get:f,enumerable:!0,configurable:!0};try{a.defineProperty(n,t,d)}catch(e){void 0!==e.number&&-2146823252!==e.number||(d.enumerable=!1,a.defineProperty(n,t,d))}}else a[r].__defineGetter__&&n.__defineGetter__(t,f)}}(self),function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var r,n=arguments.length;for(r=0;r<n;r++)e=arguments[r],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var r=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:r.call(this,e)}}e=null}()),Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null}),function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}e.prototype=window.Event.prototype,window.CustomEvent=e}(),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),function(e,t){"function"==typeof define&&define.amd?define([],(function(){return t(e)})):"object"==typeof exports?module.exports=t(e):e.Bouncer=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(e){"use strict";var t={fieldClass:"error",errorClass:"error-message",fieldPrefix:"bouncer-field_",errorPrefix:"bouncer-error_",patterns:{email:/^([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x22([^\\x0d\\x22\\x5c\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x22))*\\x40([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d)(\\x2e([^\\x00-\\x20\\x22\\x28\\x29\\x2c\\x2e\\x3a-\\x3c\\x3e\\x40\\x5b-\\x5d\\x7f-\\xff]+|\\x5b([^\\x0d\\x5b-\\x5d\\x80-\\xff]|\\x5c[\\x00-\\x7f])*\\x5d))*(\\.\\w{2,})+$/,url:/^(?:(?:https?|HTTPS?|ftp|FTP):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-zA-Z\\u00a1-\\uffff0-9]-*)*[a-zA-Z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-zA-Z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/,number:/^(?:[-+]?[0-9]*[.,]?[0-9]+)$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))/,time:/^(?:(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]))$/,month:/^(?:(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])))$/},customValidations:{},messageAfterField:!0,messageCustom:"data-bouncer-message",messageTarget:"data-bouncer-target",messages:{missingValue:{checkbox:"This field is required.",radio:"Please select a value.",select:"Please select a value.","select-multiple":"Please select at least one value.",default:"Please fill out this field."},patternMismatch:{email:"Please enter a valid email address.",url:"Please enter a URL.",number:"Please enter a number",color:"Please match the following format: #rrggbb",date:"Please use the YYYY-MM-DD format",time:"Please use the 24-hour time format. Ex. 23:00",month:"Please use the YYYY-MM format",default:"Please match the requested format."},outOfRange:{over:"Please select a value that is no more than {max}.",under:"Please select a value that is no less than {min}."},wrongLength:{over:"Please shorten this text to no more than {maxLength} characters. You are currently using {length} characters.",under:"Please lengthen this text to {minLength} characters or more. You are currently using {length} characters."},fallback:"There was an error with this field."},disableSubmit:!1,emitEvents:!0},r=function(e,t){Array.prototype.forEach.call(e,t)},n=function(){var e={};return r(arguments,(function(t){for(var r in t){if(!t.hasOwnProperty(r))return;"[object Object]"===Object.prototype.toString.call(t[r])?e[r]=n(e[r],t[r]):e[r]=t[r]}})),e},a=function(t,r,n){if("function"==typeof e.CustomEvent){var a=new CustomEvent(r,{bubbles:!0,detail:n||{}});t.dispatchEvent(a)}},i=function(e){if(!e.hasAttribute("required"))return!1;if("checkbox"===e.type)return!e.checked;var t=e.value.length;return"radio"===e.type&&(t=Array.prototype.filter.call(e.form.querySelectorAll(\'[name="\'+f(e.name)+\'"]\'),(function(e){return e.checked})).length),t<1},o=function(e,t){var r=e.getAttribute("pattern");return!(!(r=r?new RegExp("^(?:"+r+")$"):t.patterns[e.type])||!e.value||e.value.length<1)&&!e.value.match(r)},u=function(e){if(!e.value||e.value.length<1)return!1;var t=e.getAttribute("max"),r=e.getAttribute("min"),n=parseFloat(e.value);return t&&n>t?"over":!!(r&&n<r)&&"under"},l=function(e){if(!e.value||e.value.length<1)return!1;var t=e.getAttribute("maxlength"),r=e.getAttribute("minlength"),n=e.value.length;return t&&n>t?"over":!!(r&&n<r)&&"under"},s=function(e){for(var t in e)if(e[t])return!0;return!1},c=function(e,t){var r=function(e,t){return{missingValue:i(e),patternMismatch:o(e,t),outOfRange:u(e),wrongLength:l(e)}}(e,t);return r=function(e,t,r,n){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a](e,n));return t}(e,r,t.customValidations,t),{valid:!s(r),errors:r}},f=function(e){for(var t,r=String(e),n=r.length,a=-1,i="",o=r.charCodeAt(0);++a<n;){if(0===(t=r.charCodeAt(a)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");t>=1&&t<=31||127==t||0===a&&t>=48&&t<=57||1===a&&t>=48&&t<=57&&45===o?i+="\\\\"+t.toString(16)+" ":i+=t>=128||45===t||95===t||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122?r.charAt(a):"\\\\"+r.charAt(a)}return i},d=function(e,t,r){var n=e.name?e.name:e.id;return!n&&r&&(n=t.fieldPrefix+Math.floor(999*Math.random()),e.id=n),"checkbox"===e.type&&(n+="_"+(e.value||e.id)),n},m=function(e,t){var r=document.createElement("div");r.className=t.errorClass,r.id=t.errorPrefix+d(e,t,!0);var n=function(e){if("radio"===e.type&&e.name){var t=e.form.querySelectorAll(\'[name="\'+f(e.name)+\'"]\');e=t[t.length-1]}if("radio"===e.type||"checkbox"===e.type){var r=e.closest("label")||e.form.querySelector(\'[for="\'+e.id+\'"]\');e=r||e}return e}(e),a=function(e,t,r){var n=e.getAttribute(r.messageTarget);if(n){var a=e.form.querySelector(n);if(a)return a.firstChild||a.appendChild(document.createTextNode(""))}return r.messageAfterField?(t.nextSibling||t.parentNode.appendChild(document.createTextNode("")),t.nextSibling):t}(e,n,t);return a.parentNode.insertBefore(r,a),r},h=function(e,t,r){return"function"==typeof e[t]?e[t](r):e[t]},x=function(e,t,r){e.classList.add(r.fieldClass),e.setAttribute("aria-describedby",t.id),e.setAttribute("aria-invalid",!0)},v=function(e,t,r){var n=e.form.querySelector("#"+f(r.errorPrefix+d(e,r)))||m(e,r),i=function(e,t,r){var n=r.messages;if(t.missingValue)return h(n.missingValue,e.type,e)||n.missingValue.default;if(t.outOfRange)return h(n.outOfRange,t.outOfRange,e).replace("{max}",e.getAttribute("max")).replace("{min}",e.getAttribute("min")).replace("{length}",e.value.length);if(t.wrongLength)return h(n.wrongLength,t.wrongLength,e).replace("{maxLength}",e.getAttribute("maxlength")).replace("{minLength}",e.getAttribute("minlength")).replace("{length}",e.value.length);if(t.patternMismatch){return e.getAttribute(r.messageCustom)||h(n.patternMismatch,e.type,e)||n.patternMismatch.default}for(var a in r.customValidations)if(r.customValidations.hasOwnProperty(a)&&t[a]&&n[a])return h(n,a,e);return n.fallback}(e,t,r);n.textContent="function"==typeof i?i(e,r):i,function(e,t,r){"radio"===e.type&&e.name&&Array.prototype.forEach.call(document.querySelectorAll(\'[name="\'+e.name+\'"]\'),(function(e){x(e,t,r)})),x(e,t,r)}(e,n,r),r.emitEvents&&a(e,"bouncerShowError",{errors:t})},g=function(e,t){e.classList.remove(t.fieldClass),e.removeAttribute("aria-describedby"),e.removeAttribute("aria-invalid")},p=function(e,t){var r=e.form.querySelector("#"+f(t.errorPrefix+d(e,t)));r&&(r.parentNode.removeChild(r),function(e,t){"radio"===e.type&&e.name?Array.prototype.forEach.call(document.querySelectorAll(\'[name="\'+e.name+\'"]\'),(function(e){g(e,t)})):g(e,t)}(e,t),t.emitEvents&&a(e,"bouncerRemoveError"))};return function(e,i){var o,u={};u.validate=function(e,t){if(!e.disabled&&!e.readOnly&&"reset"!==e.type&&"submit"!==e.type&&"button"!==e.type){var r=n(o,t||{}),a=c(e,r);if(!a.valid)return v(e,a.errors,r),a;p(e,r)}},u.validateAll=function(e){return Array.prototype.filter.call(e.querySelectorAll("input, select, textarea"),(function(e){var t=u.validate(e);return t&&!t.valid}))};var l=function(t){t.target.form&&t.target.form.matches(e)&&u.validate(t.target)},s=function(t){t.target.form&&t.target.form.matches(e)&&t.target.classList.contains(o.fieldClass)&&u.validate(t.target)},f=function(t){if(t.target.matches(e)){t.preventDefault();var r=u.validateAll(t.target);if(r.length>0)return r[0].focus(),void a(t.target,"bouncerFormInvalid",{errors:r});o.disableSubmit||t.target.submit(),o.emitEvents&&a(t.target,"bouncerFormValid")}};u.destroy=function(){document.removeEventListener("blur",l,!0),document.removeEventListener("input",s,!1),document.removeEventListener("click",s,!1),document.removeEventListener("submit",f,!1),function(e,t){r(document.querySelectorAll(e),(function(e){r(e.querySelectorAll("input, select, textarea"),(function(e){p(e,t)}))}))}(e,o),function(e){r(document.querySelectorAll(e),(function(e){e.removeAttribute("novalidate")}))}(e),o.emitEvents&&a(document,"bouncerDestroyed",{settings:o}),o=null};return o=n(t,i||{}),function(e){r(document.querySelectorAll(e),(function(e){e.setAttribute("novalidate",!0)}))}(e),document.addEventListener("blur",l,!0),document.addEventListener("input",s,!1),document.addEventListener("click",s,!1),document.addEventListener("submit",f,!1),o.emitEvents&&a(document,"bouncerInitialized",{settings:o}),u}}));',e?.head.appendChild(n),t(n)}))}async showPostSubmissionScreen(e){let t=".sender-form-success";if("spinToWin"===this.settings.resource_type&&(await I(this.el,e.slice_index),e.coupon_code?L(this.el,e):t=".sender-form-losing"),this.screenToggle({show:t,hide:".sender-form"}),void 0!==e.subscriber_id){const t=JSON.parse(localStorage.getItem("sender_ecommerce_params")||"{}");t.sender_customer=e.subscriber_id,localStorage.setItem("sender_ecommerce_params",JSON.stringify(t)),C(e.subscriber_id)}this.settings.redirect_after&&this.settings.redirect_url&&this.redirect(this.settings)}screenToggle(e){const t=this.el.querySelector(e.show),n=this.el.querySelector(e.hide);t&&(t.style.display="block"),n&&(n.style.display="none"),"function"==typeof this.updateIframeHeight&&this.updateIframeHeight()}showError(e,t){e.forEach((e=>{const n=this.el.querySelector(`[name="${e}"]`);n&&("error"===t?(n.style.boxShadow="0 0 2px red",n.style.outline="1px solid red"):(n.style.boxShadow="",n.style.outline=""))}))}showErrorMessage(e){const t=this.iframeElement?.contentWindow?.document;if(t){let n=t.querySelector("#bouncer-error_backend");const i=t.querySelector(".sender-form .sender-form-button");n||(n=t.createElement("div"),n.classList.add("error-message"),n.id="bouncer-error_backend",i?.after(n)),n.innerText=e}}clearServerErrorMessage(){this.iframeElement?.contentWindow?.document?.getElementById("bouncer-error_backend")?.remove()}get apiBase(){return this.hasAdBlocker?"https://d38rqs2egh08o4.cloudfront.net":u}getDocHeight(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}getScrolledAmount(){const e=this.getDocHeight(),t=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,n=e-(window.innerHeight||(document.documentElement||document.body).clientHeight);return Math.floor(t/n*100)}setCookie(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="expires="+i.toUTCString();document.cookie=e+"="+escape(t)+";"+r+";path=/"}async markAsVisited(e){await this.detectAdBlocker(),fetch(`${this.apiBase}/forms/${e}/visit`,{headers:new Headers({"content-type":"application/json"}),method:"POST"}).catch((()=>{}))}dispatchClickEv(){document.documentElement.dispatchEvent(new Event("click"))}dispatchKeydownEv(e){if("Tab"!==e.key&&e.preventDefault(),"ArrowUp"===e.key||"Up"===e.key||"ArrowDown"===e.key||"Down"===e.key||"Enter"===e.key||"Escape"===e.key)document.dispatchEvent(new KeyboardEvent("keydown",{key:e.key}));else if(/^[\x00-\xFF]$/.test(e.key)){let t="";t+=e.key,document.dispatchEvent(new KeyboardEvent("keydown",{key:t})),clearTimeout(this.queryTimeout),this.queryTimeout=setTimeout((()=>{t=""}),1e3)}}handleUnsupportedCountryCodes(e){switch(e){case"AQ":return"NF";case"GG":case"IM":return"GB";case"YT":return"RE";case"PN":return"NZ";default:return!1}}validateInput(e,t){if(e.hasAttribute("required")&&""===e.value)return t.innerHTML=this.dateTimeInputValidationMsgs.missingValue,t.style.display="block",!1;if(""!==e.value){return!!(e.classList.contains("show-time")?this.dateTimeRegex:this.dateRegex).test(e.value)||(t.innerHTML=this.dateTimeInputValidationMsgs.patternMismatch,t.style.display="block",!1)}return t.style.display="none",!0}validateFormOnSubmit(e){let t=[];const n=e.querySelectorAll("input"),i=".error-message.message-slot";return n.forEach((e=>{if(e.classList.contains("sender-datetime-input")){let n;n=this.isPopup&&!this.touchScreenCalendar?e.parentElement.parentElement.querySelector(i):e.parentElement.querySelector(i),this.validateInput(e,n)||t.length||t.push(e)}else{e.required&&(e.value=e.value.trim());const n=this.bouncer?.validate(e);void 0===n||n.valid||t.length||t.push(e)}})),!t.length||(t[0].classList.contains("sender-datetime-input")&&!this.touchScreenCalendar?t[0].focus():t[0].classList.contains("sender-datetime-input")||t[0].focus(),!1)}closeModal(e,t){t.classList.contains("open")&&t.classList.remove("open"),e.classList.contains("open")&&e.classList.remove("open")}createStyleSheet(e,t,n){const i=document.createElement("style");i.innerText=t,i.classList.add(n),e.appendChild(i)}handleAnchorLinkEvents(e){const t=e.querySelectorAll("a[href]");t.length&&t.forEach((t=>{t.addEventListener("click",(n=>{n.preventDefault();const i=t.getAttribute("href").trim(),r="_blank"===t.getAttribute("target");i&&(r?window.open(i,"_blank").focus():"#"===i[0]?(this.isPopup&&e.querySelector("button.sender-form-modal-close")?.click(),location.href="#",location.href=i):window.location.href=i)}))}))}removeInputIcons(e){e.querySelectorAll("input").forEach((e=>{"checkbox"!==e.type&&e.removeAttribute("style")}))}onFormRenderCallback(e){"function"==typeof this.formRenderCallback&&this.formRenderCallback(e)}destroyBaseInstance(){this.removeResponsiveListener(),this.recaptchaMutationObserver?.disconnect?.(),this.recaptchaMutationObserver=null,this.intPhoneInput?.destroy(),this.intPhoneInput=null,clearTimeout(this.queryTimeout),this.phoneInputEl=null,this.guidingDiv=null,this.countryDropdown=null,this.datetimeInputs.forEach((e=>{e._flatpickr?.destroy()})),this.datetimeInputs=null,this.bouncer?.destroy(),this.bouncer=null,this.el=null,this.settings=null,this.recaptchaWrap=null,this.recaptchaEl=null,this.recaptchaElInner=null,this.dateTimeInputValidationMsgs=null,this.phoneNumberErrorMsgs=null,this.reachableMethods=null,this.formRenderCallback=null}getIframeTitle(){let e="Subscription form";if(this.settings.show_title){const t=document.createElement("div");t.innerHTML=this.settings.title,e=t.innerText??e}return e}};function W(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class j extends D{constructor(e,t,n,i,r){super(t),W(this,"el",void 0),W(this,"embeddedFormIntersectionObserver",null),W(this,"instanceKey",void 0),W(this,"updateIframeHeight",(()=>{const e=this.el.querySelector("form")?.getBoundingClientRect();e&&(this.iframeElement.style.height=e.height+"px")})),W(this,"renderForm",(e=>{this.formStatus="rendering",void 0!==this.settings&&Object.keys(this.settings).length&&window.fetch(this.settings.resource_path).then((t=>{t.text().then((t=>{if(!this.formAvailable)return;if(!document.body.contains(e))return void(this.formStatus="initialized");document.createElement("span").innerHTML=t;const n=document.createElement("iframe");n.style.cssText="width: 640px;height: 480px;border: none;overflow: hidden;max-width: 100%;",n.title=this.getIframeTitle();const i=document.createElement("div");i.style.cssText="display: inline-block; position: relative;",e.appendChild(i),i.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.write("<!DOCTYPE html><html><head></head><body></body></html>"),n.contentWindow.document.close(),n.contentWindow.document.body.innerHTML=t,this.iframeElement=n,this.setForm(n.contentWindow.document.documentElement),this.autoCompleteOff();const r=n.contentWindow.document.body;r.style.cssText="margin: 0; overflow: hidden; height: 100vh;";const s=n.contentWindow.document.querySelector("form"),o=getComputedStyle(s),a=o["box-shadow"],l=a.includes("inset"),c=o["border-radius"],d=o.width,u=o.height;a&&!l&&(s.style.boxShadow="none",n.style.boxShadow=a),n.style.borderRadius=c,this.iframeElement.style.height=u,this.iframeElement.style.width=d,n.contentWindow.window.addEventListener("resize",(()=>{this.shouldResizeCaptcha(),this.checkResponsive(),this.updateIframeHeight()})),["bouncerShowError","bouncerRemoveError"].forEach((e=>{n.contentWindow.document.addEventListener(e,(()=>{this.updateIframeHeight()}),!1)}));const p=n.contentWindow.document.documentElement.querySelector(this.settings.form_selector);p.style.position="relative";const m=document.createElement("div");if(m.style.cssText="position: absolute; bottom: -1px; left: 50%; width: 1px; height: 2px; pointer-events: none;",p.appendChild(m),this.embeddedFormIntersectionObserver=new IntersectionObserver((()=>{if(parseInt(getComputedStyle(this.iframeElement).width)<200){this.iframeElement.style.width="640px";const{width:e}=this.el.querySelector("form")?.getBoundingClientRect();this.iframeElement.style.width=e+"px"}else this.updateIframeHeight()}),{root:r,rootMargin:"0px",threshold:[0,.5,1],idleTimeout:0}),this.embeddedFormIntersectionObserver.observe(m),this.addBranding(),this.addValidatorScript(n.contentWindow.document).then((()=>{if(!this.formAvailable)return;const e=this.settings?.validation_messages;let t={};e&&Object.keys(e).length&&e.constructor===Object&&(t=e);const i="."+p.classList.value.trim().split(" ").join(".");this.bouncer=new n.contentWindow.Bouncer(i,{disableSubmit:!0,messages:_(t),customValidations:this.intPhoneInput?.telInput?this.phoneNumberErrorMsgs:{}})})),n.contentWindow.document.addEventListener("bouncerFormValid",(e=>{if(e.target===p){if(!this.settings.use_recaptcha)return void this.sendRequest(this.serialize(p));const e=n.contentWindow.window.grecaptcha;this.validateRecaptcha(e,h,this.serialize(p))}}),!1),this.handleAnchorLinkEvents(p),p.addEventListener("submit",(e=>{if(e.preventDefault(),"disabled"!==this.formStatus){if((!this.dateTimeInputValidationMsgs||this.validateFormOnSubmit(p))&&!this.bouncer)return this.sendRequest(this.serialize(p)),!1}else e.stopPropagation()})),this.settings.use_recaptcha){this.addReCaptcha(n.contentWindow.document);n.contentWindow.document.head.querySelector("#form-recaptcha").onload=()=>{setTimeout((()=>{n.contentWindow.document.querySelector("body div .grecaptcha-badge").style.visibility="hidden"}),3e3)}}"loading"===n.contentWindow.document.readyState?n.contentWindow.window.addEventListener("DOMContentLoaded",(()=>{this.setupCustomInputs()})):this.setupCustomInputs(),this.checkResponsive(),this.removeInputIcons(this.el),this.formRendered=!0,this.formStatus=this.formStatusOnRender,this.addResponsiveListener(),this.onFormRenderCallback(this.settings.hash_id),this.markAsVisited(this.settings.id)}))})).catch((e=>{this.formStatus="initialized"}))})),this.formInstancesPointer=e,this.formStatusOnRender=i.initialStatus,this.formRenderCallback=i.onRender||null,this.setForm(n),this.renderForm(n),this.instanceKey=r}get isFormInDOM(){return document.body.contains(this.iframeElement)}enable(){"rendering"!==this.formStatus?this.isFormInDOM&&(this.formStatus="enabled"):this.formStatusOnRender="enabled"}disable(){"rendering"!==this.formStatus?this.isFormInDOM&&(this.formStatus="disabled"):this.formStatusOnRender="disabled"}destroy(){delete this.formInstancesPointer.embeddedForms[this.instanceKey],this.formInstancesPointer=null,this.destroyBaseInstance(),this.settings=null,this.el=null,this.embeddedFormIntersectionObserver?.disconnect(),this.embeddedFormIntersectionObserver=null,this.iframeElement?.parentElement.remove(),this.iframeElement=null,this.formStatus="unavailable"}}function F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class N extends D{constructor(e,t,n,i,r){var s;super(t),s=this,F(this,"popup",void 0),F(this,"popupForm",void 0),F(this,"id",void 0),F(this,"hashId",void 0),F(this,"isPopupWindow",void 0),F(this,"popupShown",!1),F(this,"scrollListener",!1),F(this,"preventBehaviour",!1),F(this,"popupDisplayTimeout",void 0),F(this,"showOnLeaveTimeout",void 0),F(this,"clickElsCache",[]),F(this,"popupOpen",!1),F(this,"postponeDisable",!1),F(this,"wheelChangeEvents",null),F(this,"resizePopup",(()=>{this.iframeElement&&(this.checkResponsive(),this.iframeElement.style.width=window.innerWidth+"px",this.iframeElement.style.height=window.innerHeight+"px",this.shouldResizeCaptcha())})),F(this,"showPopup",(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(s.isFormInDOM&&(!s.popupShown||e)&&!s.popupOpen){s.popupOpen=!0;const e=Math.floor(Date.now()/1e3);s.setCookie("sender_popup_shown_"+s.hashId,e),s.popup.style.display="block",s.iframeElement.style.display="block",s.addResponsiveListener(),s.shouldResizeCaptcha(),s.wheelChangeEvents?.updateWheelEls(),s.popupShown||(s.popupShown=!0),s.markAsVisited(s.settings.id),s.scrollListener&&(document.removeEventListener("scroll",s.scrollHandler),s.scrollListener=!1)}})),F(this,"scrollHandler",(e=>{this.getScrolledAmount()>=this.settings.scroll_percent?this.showPopup():!e&&window.innerHeight>=document.body.scrollHeight&&setTimeout((()=>{this.showPopup()}),1e3)})),this.formInstancesPointer=e,this.id=t.id,this.hashId=t.hash_id,this.formStatusOnRender=n.initialStatus,this.formRenderCallback=n.onRender||null,this.preventBehaviour=!i,this.clickElsCache=r,this.isPopupWindow="popupWindow"===this.settings.resource_type,this.addToDom()}get isFormInDOM(){return document.body.contains(this.iframeElement)}addToDom(){this.formStatus="rendering",window.fetch(this.settings.resource_path).then((e=>{e.text().then((e=>{if(!this.formAvailable)return;window.addEventListener("resize",this.resizePopup),this.iframeElement=document.createElement("iframe"),this.iframeElement.style.cssText=`overflow: hidden auto;width: ${window.innerWidth}px;height: ${window.innerHeight}px;position: fixed;top: 0;left: 0;border: none;z-index: 999999;max-width: 100%;`,this.iframeElement.title=this.getIframeTitle(),document.body.append(this.iframeElement);const t=document.createElement("div"),n=document.createElement("div");t.appendChild(n),n.innerHTML=e,n.classList.add(this.settings.popup_selector.replace(/\./g,"")),this.iframeElement.style.display="none";const i=this.iframeElement.contentWindow.document;i.open(),i.write("<!DOCTYPE html><html><head></head><body></body></html>"),i.close(),i.body.innerHTML=t.innerHTML,n.style.display="block";const r=this.settings.resource_type;let s=i.querySelector(`.sender-subs-${r}-form-`+this.id);s||(s=i.querySelector(".sender-subs-popup-form-"+this.hashId)),this.popup=s.closest(this.settings.popup_selector),this.popupForm=this.popup.querySelector(this.settings.form_selector),this.addValidatorScript(i).then((()=>{if(!this.formAvailable)return;const e=this.settings?.validation_messages;let t={};e&&Object.keys(e).length&&e.constructor===Object&&(t=e);const n="."+this.popupForm.classList.value.trim().split(" ").join(".");this.bouncer=new this.iframeElement.contentWindow.Bouncer(n,{disableSubmit:!0,messages:_(t),customValidations:this.intPhoneInput?.telInput?this.phoneNumberErrorMsgs:{}})})),this.addBranding(),"loading"===i.readyState?this.iframeElement.contentWindow.window.addEventListener("DOMContentLoaded",(()=>{this.setupCustomInputs()})):this.setupCustomInputs(),this.checkResponsive(),this.removeInputIcons(this.popup),this.setForm(this.popup),this.autoCompleteOff(),this.formStatus=this.formStatusOnRender,this.formRendered=!0,this.addEventListeners(),this.onFormRenderCallback(this.hashId)}))})).catch((e=>{this.formStatus="initialized"}))}addEventListeners(){this.handleAnchorLinkEvents(this.popupForm),this.popupForm.addEventListener("submit",(e=>{if(e.preventDefault(),"disabled"!==this.formStatus){if(this.isPopupWindow)return this.settings.redirect_url&&(window.location=this.settings.redirect_url),!1;if(!this.dateTimeInputValidationMsgs||this.validateFormOnSubmit(this.popupForm))return this.bouncer||this.sendRequest(this.serialize(this.popupForm)),!1}else e.stopPropagation()})),this.iframeElement.contentWindow.document.addEventListener("bouncerFormValid",(e=>{if(e.target===this.popupForm&&!this.isPopupWindow){if(!this.settings.use_recaptcha)return void this.sendRequest(this.serialize(this.popupForm));const e=this.iframeElement.contentWindow.window.grecaptcha;this.validateRecaptcha(e,h,this.serialize(this.popupForm))}}),!1),this.settings.use_recaptcha&&this.addReCaptcha(this.iframeElement.contentWindow.document),"complete"===this.iframeElement.contentWindow.document.readyState?this.setCloseListener():this.iframeElement.contentWindow.window.onload=()=>{this.setCloseListener()},"enabled"===this.formStatus?(this.initPopup(),this.initShowOnLeave()):this.clickElsCache.length&&(this.clickElsCache=[])}initPopup(){const e=this.settings.resource_type;this.wheelChangeEvents=function(e,t){if("spinToWin"!==e)return;return k(t.contentWindow,t.contentWindow.document.querySelector(".sender-form-modal.is-active"))}(e,this.iframeElement),this.settings.scroll&&!this.preventBehaviour&&(document.addEventListener("scroll",this.scrollHandler),this.scrollListener=!0,this.scrollHandler()),this.clickElsCache.length&&this.clickElsCache.forEach((e=>{e.addEventListener("click",this.showPopup)})),this.settings.delay&&!this.preventBehaviour&&(this.popupDisplayTimeout=setTimeout((()=>{this.showPopup()}),1e3*parseInt(this.settings.delay_amount)))}initShowOnLeave(){this.settings.show_on_leave&&!this.preventBehaviour&&(this.showOnLeaveTimeout=setTimeout((()=>{this.popupShown||document.body.addEventListener("mouseleave",this.showPopup,{once:!0})}),1e3*parseInt(this.settings.show_on_leave_every)))}removeElsClickEvent(){this.clickElsCache.forEach((e=>{e?.removeEventListener("click",this.showPopup)})),this.clickElsCache=[]}removePopupEventListeners(){window.removeEventListener("resize",this.resizePopup),document.removeEventListener("scroll",this.scrollHandler),document.body.removeEventListener("mouseleave",this.showPopup,{once:!0}),this.wheelChangeEvents?.removeListeners(),this.wheelChangeEvents=null,clearTimeout(this.popupDisplayTimeout),clearTimeout(this.showOnLeaveTimeout),this.removeElsClickEvent()}setCloseListener(){this.popup.querySelectorAll(".sender-popup-close").forEach((e=>{e.setAttribute("type","button"),e.addEventListener("click",(e=>(e.preventDefault(),this.removeResponsiveListener(),this.popup.style.display="none",this.iframeElement.style.display="none",this.popupOpen=!1,this.postponeDisable&&(this.postponeDisable=!1,this.disable()),!1)))}))}getClickEls(){if(this.settings.show_on_click&&this.settings.show_on_click_element?.trim()){let e=[];try{e=document.querySelectorAll(this.settings.show_on_click_element)}catch{}return e}return[]}enable(){if("rendering"!==this.formStatus){if(this.isFormInDOM&&"disabled"===this.formStatus){this.postponeDisable&&(this.postponeDisable=!1);const e=v(this.settings);this.clickElsCache=this.getClickEls(),(e||this.clickElsCache.length)&&(this.preventBehaviour=!e,this.resizePopup(),this.initPopup(),this.initShowOnLeave(),this.formStatus="enabled")}}else this.formStatusOnRender="enabled"}disable(){if("rendering"!==this.formStatus){if(this.isFormInDOM&&"enabled"===this.formStatus){if(this.popupOpen)return void(this.postponeDisable=!0);this.removePopupEventListeners(),this.formStatus="disabled"}}else this.formStatusOnRender="disabled"}destroy(){delete this.formInstancesPointer.popupForms[this.hashId||this.id.toString()],this.formInstancesPointer=null,this.destroyBaseInstance(),this.settings=null,this.popup=null,this.popupForm=null,this.id=null,this.hashId=null,this.iframeElement?.remove(),this.iframeElement=null,this.removePopupEventListeners(),this.clickElsCache=null,this.formStatus="unavailable"}}function B(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class H extends D{constructor(e){super(),B(this,"resourceKey",void 0),this.resourceKey=e}get urlPrefix(){return`${this.apiBase}/commerce`}getEcommerceParams(){const e={},t=localStorage.getItem("sender_ecommerce_params"),n=JSON.parse(t||"{}");for(const t in n)e[x[t]]=n[t];return e}trackVisitors(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this.getEcommerceParams(),n=window.location.href;if(!(null==t.subscriber_id||e&&e.email)){const i={resource_key:this.resourceKey,subscriber_id:t.subscriber_id,url:n};null!=t.campaign_id&&(i.campaign_id=t.campaign_id),null!=t.campaign_type&&(i.campaign_type=t.campaign_type),e?.site_id&&(i.site_id=e.site_id),this.sendApiRequest(`${this.apiBase}/visitor`,i).then((e=>{if(200===e.status)return e.json()}))}e&&(e.email||e.site_id)&&(e.url||(e.url=n),this.sendApiRequest(`${this.apiBase}/visitor`,{resource_key:this.resourceKey,...e}).then((e=>{if(200===e.status)return e.json();throw new Error("API request failed")})).then((e=>{const n=e.subscriber_id;if(n&&(!t||t.subscriber_id!==n)){const e=JSON.parse(localStorage.getItem("sender_ecommerce_params")||"{}");e.sender_customer=n,localStorage.setItem("sender_ecommerce_params",JSON.stringify(e)),C(n)}})).catch((e=>{})))}async trackCart(e){if(!e.external_id)return;const t=this.getEcommerceParams();t.subscriber_id&&this.sendApiRequest(`${this.apiBase}/commerce/carts`,{...this.getEcommerceParams(),subscriber_id:t.subscriber_id,resource_key:this.resourceKey,url:window.location.href,...e})}convertCart(e){const t=this.getEcommerceParams();if(!e.external_id||!e.email&&!t.subscriber_id)return;const n=e.external_id;delete e.external_id;const i={resource_key:this.resourceKey,...t,...e};this.sendApiRequest(`${this.urlPrefix}/carts/${n}/convert`,i).then((()=>{localStorage.removeItem("sender_ecommerce_params")}))}updateCart(e){if(!e.external_id)return;const t=e.external_id;delete e.external_id;const n={resource_key:this.resourceKey,url:window.location.href,...e};this.sendApiRequest(`${this.urlPrefix}/carts/${t}`,n,"PATCH").then((n=>this.handleUpdateCartApiResponse(n,t,e))).catch((e=>{}))}handleUpdateCartApiResponse(e,t,n){if(404===e.status)return n.external_id=t,this.trackCart(n);if(!e.ok)throw new Error(e.statusText);return e.json()}deleteCart(e){e.external_id&&this.sendApiRequest(`${this.urlPrefix}/carts/${e.external_id}`,{resource_key:this.resourceKey},"DELETE")}statusCartUpdate(e){if(!e.external_id)return;const t=e.external_id;delete e.external_id,this.sendApiRequest(`${this.urlPrefix}/carts/${t}/status`,{resource_key:this.resourceKey,...e},"PATCH")}subscribeNewsletter(e){return this.sendApiRequest(`${this.urlPrefix}/subscriber/subscription/update`,{resource_key:this.resourceKey,...e},"PATCH").then((e=>{if(200===e.status)return e.json();throw new Error("API request failed")})).catch((e=>{}))}}function V(){window.Shopify?.routes&&function(){const e=new URLSearchParams(location.search),t=["sender_campaign","sender_ctype","sender_customer"],n={};if(t.map((t=>{e.get(t)&&(n[t]=e.get(t))})),!Object.keys(n).length)return;const i=new FormData;t.forEach((e=>{n[e]&&i.append(`attributes[${e}]`,n[e])})),fetch(window.Shopify.routes.root+"cart/update.js",{method:"POST",body:i})}()}let $,z=!1;const G={},K={embeddedForms:{},popupForms:{}};let U=null;function Y(e){if(void 0===e||"all"===e)return"all";if("string"==typeof e&&(e=[e]),e&&Array.isArray(e)){const t={};return e.forEach((e=>{let n;switch(G[e]){case"embed":n="embeddedForms";break;case"popup":case"spinToWin":n="popupForms"}n&&(t[n]||(t[n]={}),t[n][e]=1)})),t}return null}!async function(){var e=["trackVisitors","trackCart","convertCart","updateCart","deleteCart","statusCartUpdate","subscribeNewsletter"];async function t(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(window.sender.loaded=!0,e.includes(n[0]))return function(){window.senderTracker||(window.senderTracker=new H(window.sender.resourceKey));window.senderTracker[n[0]](n[1])}();if(void 0===window.sender.resourceKey){window.sender.recaptchaLoaded=!1,window.sender.resourceKey=n[0],"loading"===document.readyState?window.addEventListener("DOMContentLoaded",(()=>{V()})):V();var r=await window.fetch(`https://cdn.sender.net/accounts_resources/base/${n[0]}.json`,{cache:"no-cache"}).catch((e=>{}));return await async function(e){const t=await e.json();(t.forms.length||t.popups.length)&&document.characterSet.includes("UTF");for(const e in t)t[e].forEach((e=>{const t=e.hash_id||e.id.toString();G[t]=e.resource_type}));window.senderObjects=t,function(e){if("loading"!==document.readyState)e();else if(window.addEventListener){let t=!1;const n=()=>{if(!t){t=!0;try{e()}catch(e){}}};window.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n);const i=setInterval((()=>{"loading"!==document.readyState&&(clearInterval(i),n())}),25)}else window.attachEvent("onreadystatechange",(function(){"loading"!==document.readyState&&e()}))}(c)}(r),!0}function s(){return{render(e,t){t&&"object"==typeof t||(t={initialStatus:"enabled"}),"disabled"!==t.initialStatus&&(t.initialStatus="enabled"),function(e,t){const n=Y(e);if(!n)return;"all"===n?(d("all",t),u("all",t)):(o(n.embeddedForms)&&d(n.embeddedForms,t),o(n.popupForms)&&u(n.popupForms,t))}(e,t)},enable(e){a(e,"enable")},disable(e){a(e,"disable")},destroy(e){a(e,"destroy")},getStatus(e){if("string"==typeof e&&(e=[e]),Array.isArray(e)){const t={},n={...K.popupForms,...K.embeddedForms};return e.forEach((e=>{if("string"==typeof e&&e.trim()){const i=n[e]?.formStatus;i?"enabled"!==i&&"disabled"!==i||n[e].isFormInDOM?t[e]=i:t[e]="initialized":t[e]="unavailable"}})),t}return null}}}function o(e){return"all"===e||p(e)}function a(e,t){const n=Y(e);if(n)if("all"!==n)o(n.embeddedForms)&&l(n.embeddedForms,"embeddedForms",t),o(n.popupForms)&&l(n.popupForms,"popupForms",t);else for(const e in K){const n=K[e];for(const e in n){n[e][t]()}}}function l(e,t,n){const i=K[t],r="all"===e?i:e;if("all"!==e&&"embeddedForms"===t){const t=[],r=Object.keys(e);return Object.keys(i).forEach((e=>{r.forEach((n=>{(e===n||e.startsWith(n))&&t.push(e)}))})),void t.forEach((e=>{const t=i[e];t&&t[n]()}))}for(const e in r){const t=i[e];t&&t[n]()}}function c(){z||(d("all"),u("all")),window.senderForms=s(),window.senderFormsLoaded=!0,window.dispatchEvent(new Event("onSenderFormsLoaded")),window[U]?.()}function d(e,t){if(t&&"object"==typeof t||(t={initialStatus:"enabled"}),!window.senderObjects.forms.length)return;const n={};document.querySelectorAll(".sender-form-field").forEach((e=>{const t=e.getAttribute("data-sender-form-id");n[t]?n[t].push(e):n[t]=[e]})),p(n)&&window.senderObjects.forms.forEach((i=>{const r=i.embed_hash,s=i.id.toString(),o=n[r]||n[s],a=i.hash_id||s,l="all"===e||Boolean(e[a]);o&&l&&o.forEach(((e,n)=>{const r=n>0?a+"_"+n:a;h(j,"embeddedForms",r,[K,i,e,t,r])}))}))}function u(e,t){t&&"object"==typeof t||(t={initialStatus:"enabled"}),window.senderObjects.spinToWin?.length&&(window.senderObjects.popups=[...window.senderObjects.popups,...window.senderObjects.spinToWin]),window.senderObjects.popups.length&&window.senderObjects.popups.forEach((n=>{const i=n.hash_id||n.id.toString(),r="all"===e||Boolean(e[i]),s=v(n);let o=[];if(n.show_on_click&&n.show_on_click_element?.trim()){let e=function(e){const t=e.trim();if(/^[#.][0-9]/.test(t))return t.replace(/^([#.])([0-9])/,((e,t,n)=>`${t}\\3${n} `));return t}(n.show_on_click_element);try{o=document.querySelectorAll(e)}catch{}}r&&(s||o.length)&&h(N,"popupForms",i,[K,n,t,s,o])}))}function h(e,t,n,i){const r=K[t],s=r[n];s?s&&"rendering"!==s.formStatus&&!s.isFormInDOM&&(s.destroy(),r[n]=new e(...i)):r[n]=new e(...i)}}const n=document.currentScript?.src.split("?")[1];if(n){n.split("&").forEach((e=>{e.includes("resource_key")&&($=e.split("=")[1]),"explicit=true"===e&&(z=!0),e.includes("onload=")&&(U=e.replace("onload=",""))}))}const i=window,r="sender";if(!i[r]&&$&&(i.Sender=r,i[r]=function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date,sender($)),void 0!==window.sender.q&&void 0!==window.sender.q[0]?.[0]&&!window.sender.loaded){!function(){let e=window.location.search.substring(1);if(e){e=decodeURIComponent(e);const t=e.split("&"),n={};t.forEach((e=>{const t=e.split("="),i=t[0],r=t[1];x[i]&&(n[i]=r)})),Object.keys(n).length&&localStorage.setItem("sender_ecommerce_params",JSON.stringify(n)),Boolean(n.sender_customer)&&"null"!==n.sender_customer&&C(n.sender_customer)}}();for(var s=0;s<window.sender.q.length;s++){var o=window.sender.q[s];await t(...o)}window.sender=t}}()})();